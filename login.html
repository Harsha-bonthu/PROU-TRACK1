<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login â€” Mock Store</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="container" style="max-width:640px;margin:60px auto;">
    <h1>Sign in (Demo)</h1>
    <p>This demo uses a mock authentication stored in your browser's <code>localStorage</code>. Use any email and password to sign in.</p>
    <form id="login-form" style="display:flex;flex-direction:column;gap:10px;">
      <input id="email" type="email" placeholder="you@example.com" required style="padding:12px;border-radius:8px;border:1px solid #e6e9ef">
      <input id="password" type="password" placeholder="password" required style="padding:12px;border-radius:8px;border:1px solid #e6e9ef">
      <div style="display:flex;gap:10px;align-items:center">
        <button class="btn" type="submit">Sign in</button>
        <button id="guest" type="button" class="btn" style="background:#6b7280">Continue as guest</button>
      </div>
    </form>
    <p style="margin-top:18px;color:var(--muted)">After signing in you can access the <a href="admin.html">Admin dashboard</a>.</p>
  </main>
  <script src="auth.js"></script>
  <script>
    document.getElementById('login-form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const pwd = document.getElementById('password').value;
      if(!email || !pwd) return alert('Enter email and password');
      // Mock: accept any credentials and store a simple user object
      window.__mockAuth.setUser({email: email, created: Date.now()});
      // redirect to admin or home
      const q = new URLSearchParams(location.search);
      const dest = q.get('redirect') || 'index.html';
      location.href = dest;
    });
    document.getElementById('guest').addEventListener('click', ()=>{
      // guest user
      window.__mockAuth.setUser({email: 'guest@local', guest: true});
      location.href = 'index.html';
    });
  </script>
</body>
</html>
